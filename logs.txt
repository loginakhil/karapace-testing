user@machine karapace-testing % make test
Collecting requests
[+] Running 2/2
 ⠿ Container karapace-testing-kafka-1     Healthy                                                                                                                                                      1.8s
 ⠿ Container karapace-testing-registry-1  Healthy                                                                                                                                                     12.2s
python3 test.py
DEBUG:root:>>>> List existing schemas
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): localhost:8081
send: b'GET /subjects HTTP/1.1\r\nHost: localhost:8081\r\nUser-Agent: python-requests/2.30.0\r\nAccept-Encoding: gzip, deflate, br\r\nAccept: */*\r\nConnection: keep-alive\r\n\r\n'
reply: 'HTTP/1.1 200 OK\r\n'
header: Content-Length: 2
header: Content-Type: application/vnd.schemaregistry.v1+json
header: Date: Wed, 17 May 2023 08:05:04 GMT
header: Server: Seastar httpd
DEBUG:urllib3.connectionpool:http://localhost:8081 "GET /subjects HTTP/1.1" 200 2
DEBUG:root:Schemas fetched successfully! []
DEBUG:root:>>>> Registering place proto
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): localhost:8081
send: b'POST /subjects/place/versions HTTP/1.1\r\nHost: localhost:8081\r\nUser-Agent: python-requests/2.30.0\r\nAccept-Encoding: gzip, deflate, br\r\nAccept: */*\r\nConnection: keep-alive\r\nContent-Type: application/vnd.schemaregistry.v1+json\r\nContent-Length: 148\r\n\r\n'
send: b'{"schema": "\\nsyntax = \\"proto3\\";\\npackage a1;\\nmessage Place {\\n        string city = 1;\\n        int32 zone = 2;\\n}\\n", "schemaType": "PROTOBUF"}'
reply: 'HTTP/1.1 200 OK\r\n'
header: Content-Length: 8
header: Content-Type: application/vnd.schemaregistry.v1+json
header: Date: Wed, 17 May 2023 08:05:04 GMT
header: Server: Seastar httpd
DEBUG:urllib3.connectionpool:http://localhost:8081 "POST /subjects/place/versions HTTP/1.1" 200 8
DEBUG:root:Schema (place) registered successfully! {"id":1}
DEBUG:root:>>>> Registering customer proto
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): localhost:8081
send: b'POST /subjects/customer/versions HTTP/1.1\r\nHost: localhost:8081\r\nUser-Agent: python-requests/2.30.0\r\nAccept-Encoding: gzip, deflate, br\r\nAccept: */*\r\nConnection: keep-alive\r\nContent-Type: application/vnd.schemaregistry.v1+json\r\nContent-Length: 278\r\n\r\n'
send: b'{"schema": "\\nsyntax = \\"proto3\\";\\npackage a1;\\nimport \\"place.proto\\";\\nmessage Customer {\\n        string name = 1;\\n        int32 code = 2;\\n        Place place = 3;\\n}\\n", "schemaType": "PROTOBUF", "references": [{"name": "place.proto", "subject": "place", "version": -1}]}'
reply: 'HTTP/1.1 422 Unprocessable Entity\r\n'
header: Content-Length: 56
header: Server: Seastar httpd
header: Date: Wed, 17 May 2023 08:05:04 GMT
header: Content-Type: application/vnd.schemaregistry.v1+json
DEBUG:urllib3.connectionpool:http://localhost:8081 "POST /subjects/customer/versions HTTP/1.1" 422 56
ERROR:root:Error registering schema: customer, {"error_code":422,"message":"parse error at offset 273"}
